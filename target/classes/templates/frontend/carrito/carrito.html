<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="recursos/navbar::head">
<meta charset="UTF-8"/>
<title>Art Academy</title>
</head>
 <style>
        .separacion{
            border-left:1px solid gainsboro;
            height:500px;
            position: absolute;
            left:67%;
            margin-left:-3px;
            top: 0;
        }   
    </style>
<body>

<nav th:replace="recursos/navbar::navbar">

</nav>
 <!--Section: Block Content-->
  <br><br><br><br>
  <div class="container col-xl-8 ">
<section>

<div class="alert alert-danger alert-dismissible fade show" role="alert" th:if="${error!=null}">
  <strong>Error!</strong> [[${error}]]
  <button type="button" class="close" data-dismiss="alert" aria-label="Close">
    <span aria-hidden="true">&times;</span>
  </button>
</div>
<div class="alert alert-success alert-dismissible fade show" role="alert" th:if="${info!=null}">
  <strong>Success!</strong> [[${info}]]
  <button type="button" class="close" data-dismiss="alert" aria-label="Close">
    <span aria-hidden="true">&times;</span>
  </button>
</div>
    <!--Grid row-->
    <div class="row" >
  
  	 <form th:action="@{/actualizar/cantidad}" method="post">
  	 <input type="hidden" id="newCantidad" th:name="cantidad">
  	 <input type="hidden" id="newId" th:name="id">
      <!--Grid column-->
      <div class="col-lg-8" >
      <th:block th:each="items: ${carritos}">
  
        <!-- Card -->
        <div class="mb-3">
          <div class="pt-4 wish-list">
  
          
  
            <div class="row mb-4">
              <div class="col-md-5 col-lg-3 col-xl-3">
                <div class="view zoom overlay z-depth-1 rounded mb-3 mb-md-0">
                  <img class="img-fluid w-100"
                    th:if="${#strings.length(items.caracteristicas.obras.rutaimagen_principal)>0}" th:src="@{'/imagenes/'+${items.caracteristicas.obras.rutaimagen_principal}}">
                  <a href="#!">
                    <div class="mask">
                      <img class="img-fluid w-100"
                        src="img/14.png">
                      <div class="mask rgba-black-slight"></div>
                    </div>
                  </a>
                </div>
              </div>
              <div class="col-md-7 col-lg-9 col-xl-9">
                <div>
                  <div class="d-flex justify-content-between">
                    <div>
                      <h5 class="mb-2 text-muted text-uppercase">Nombre: <span ><a th:href="@{'/detalleObra/'+${items.caracteristicas.obras.id}}">[[${items.caracteristicas.obras.nombre}]]</a></span></h5>
                      <p class="mb-2 text-muted text-uppercase small">Tama√±o: <span>[[${items.caracteristicas.size}]]</span></p>
                      <p class="mb-2 text-muted text-uppercase small">Precio: <span>[[${items.caracteristicas.precio}]]</span></p>
                    
                    </div>
                    <div class="my-4">
                      <input th:id="${items.id}" type="number" min="1" max="${items.caracteristicas.stock}" class="form-control inputCantidad" th:value="${items.cantidad}">
  					 <button type="submit" style="display: none;" th:id="'update-item-'+${items.id}" class="btn btn-warning btn-update">Actualizar</button>                       
                      <p class="mb-2 text-muted text-uppercase small">Subtotal: <span>[[${items.subtotal}]] </span></p>
                      
                  </div>
                  <div class="d-flex justify-content-between align-items-center">
                    <div>
                      <a href="#!" type="button" onclick="alerta()" class="card-link-secondary small text-uppercase mr-3"><i
                          class="fas fa-trash-alt mr-1"></i> Quitar del Carrito </a>
                    </div>
                    
                  </div>
                </div>
              </div>
            </div>
          
  
          </div>
        </div>
      </div>
      </th:block>
      <!--Grid column-->
  
      <div th:unless="${#lists.isEmpty(carritos)}" class="separacion">

      </div>
      <!--Grid column-->
      <div class="col-md-4 col-md-offset-4" th:unless="${#lists.isEmpty(carritos)}">
  
        <!-- Card -->
        <div class="">
          <div class="">
  
            <h5 class="mb-3">Costos</h5>
            <ul class="list-group list-group-flush ">
              <li class="list-group-item d-flex justify-content-between align-items-center border-0 px-0 pb-0">
                Total
                <span>[[${total}]]</span> 
             <br><br>
            </ul>
            <a type="button" href="LoginCompar.html" class="btn btn-outline-default btn-rounded btn-block">Finalizar la compra</a>
            <a type="button" href="Index.html" class="btn btn-outline-warning waves-effect btn-block ">Seguir Comprando</a>
  
          </div>
        </div>
        <!-- Card -->
  
  
      </div>
      <!--Grid column-->
     
  
    </div>
    <!-- Grid row -->
    </form>
   </div>
  </section>
</div>

	<div class="text-center">
    <div  th:if="${#lists.isEmpty(carritos)}">
    
      <h2>No tienes obras agregados al carrito</h2>
      <a th:href="@{/inicio}" class="btn btn-danger"><i class="fas fa-long-arrow-alt-left"></i> Ir a la tienda</a>
      </div>
      </div>
   <div th:replace="recursos/navbar::js">  
             
 </div>
 <script type="text/javascript">
 $(document).ready(function(){
	 $(".inputCantidad").on('change',function(){
		 var id=this.id;
		 var cantidad=this.value;
		 $("#newCantidad").val(cantidad);
		 $("#newId").val(id);
		 $("#update-item-"+id).css('display','inline-block');
	 });
 });
 </script>
</body>
</html>